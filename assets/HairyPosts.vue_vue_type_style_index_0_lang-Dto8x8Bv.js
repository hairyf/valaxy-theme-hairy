import{q as A,i as g,a6 as D,a7 as V,d as $,x as N,b as t,c as i,e as y,w as k,g as v,F as x,l as w,k as H,t as f,M as h,h as e,a8 as j,a5 as S,j as P,a9 as I,u as R,f as b,N as E,O as z,y as Y,z as O,_ as W,n as F,aa as U,ab as q,ac as G,ad as J,I as K}from"./app-DoOrpxZc.js";import{E as L}from"./index-DY63yZIR.js";const Q=D(V);function C(){const c=A(),n=Q("--hairy-theme:post-layout",null);return g({get:()=>{var o;return n.value||((o=c.value.layout)==null?void 0:o.post)||"image"},set:o=>n.value=o})}const X={class:"pagination"},Z=e("div",{"i-ri-arrow-left-s-line":""},null,-1),ee=e("div",{"i-ri-arrow-right-s-line":""},null,-1),se=$({__name:"ValaxyPagination",props:{curPage:{},total:{},pageSize:{}},emits:["pageChange"],setup(c,{emit:n}){const r=c,o=n,d=g(()=>Math.ceil(r.total/r.pageSize)),l=g(()=>r.curPage===1||r.curPage===d.value?3:2);function u(a){return a===1||a===d.value?!0:a>r.curPage-l.value&&a<r.curPage+l.value}function p(a){return o("pageChange",a),a===1?"/":`/page/${a}`}return(a,s)=>{const _=N("RouterLink");return t(),i("nav",X,[a.curPage!==1?(t(),y(_,{key:0,class:"page-number",to:p(a.curPage-1),"aria-label":"prev"},{default:k(()=>[Z]),_:1},8,["to"])):v("v-if",!0),(t(!0),i(x,null,w(d.value,m=>(t(),i(x,null,[u(m)?(t(),y(_,{key:m,class:h(["page-number",a.curPage===m&&"active"]),to:p(m)},{default:k(()=>[H(f(m),1)]),_:2},1032,["class","to"])):m===a.curPage-l.value?(t(),i("span",{key:`prev-space-${m}`,class:"space",disabled:""}," ... ")):m===a.curPage+l.value?(t(),i("span",{key:`next-space-${m}`,class:"space",disabled:""}," ... ")):v("v-if",!0)],64))),256)),a.curPage!==d.value?(t(),y(_,{key:1,class:"page-number",to:p(a.curPage+1),"aria-label":"next"},{default:k(()=>[ee]),_:1},8,["to"])):v("v-if",!0)])}}}),te={class:"py-12"},ae={class:"space-y-2 xl:grid xl:grid-cols-4 xl:space-y-0 xl:items-baseline"},oe={class:"space-y-5 xl:col-span-4"},ne={class:"space-y-6"},le={class:"text-2xl leading-8 font-bold tracking-tight"},re=["href"],ie=["innerHTML"],ce={class:"text-base leading-6 font-medium"},ue=["href"],de=e("span",{class:"hidden md:block"},"Read more",-1),pe=e("span",null," →",-1),_e=[de,pe],me=$({__name:"HairyArticleText",props:{post:{}},setup(c){const n=c,r=C(),o=g(()=>r.value==="text"?j(n.post.excerpt):n.post.excerpt);return(d,l)=>(t(),i("li",te,[e("article",ae,[e("div",oe,[e("div",ne,[e("h2",le,[e("a",{class:"st-text",href:d.post.path},f(d.post.title),9,re)]),o.value?(t(),i("div",{key:0,class:"prose max-w-none text-gray-500",innerHTML:o.value},null,8,ie)):v("v-if",!0)]),e("div",ce,[e("a",{class:"link","aria-label":"read more",href:d.post.path},_e,8,ue)])])])]))}}),ge={class:"divide-y divide-gray-200 dark:divide-gray-700"},fe=$({__name:"HairyPostTextsList",props:{type:{},posts:{}},setup(c){const n=c,r=S(),o=g(()=>n.posts||r.value);return(d,l)=>{const u=me;return t(),i("ul",ge,[(t(!0),i(x,null,w(o.value,(p,a)=>(t(),y(I,{key:a,name:"fade"},{default:k(()=>[P(u,{post:p},null,8,["post"])]),_:2},1024))),128))])}}}),ve=c=>(Y("data-v-34cfc6d0"),c=c(),O(),c),ye={class:"flex justify-between items-center"},he={class:"flex justify-end gap-2 text-size-sm lt-sm:text-size-xs"},ke={class:"lt-sm:hidden"},xe=["src"],$e={class:"flex-1 lt-md:flex-[1.2] flex flex-col justify-between py-2 dark:py-0"},be={class:"flex-1 text-size-sm"},Pe={class:"line-clamp-text line-clamp-5 lt-sm:line-clamp-3"},we={class:"flex justify-between items-center"},Ce={class:"text-base leading-6 font-medium"},He={key:0},ze=ve(()=>e("span",{class:"hidden md:block"},"Read more",-1)),Se={key:1},Te=$({__name:"HairyArticleImage",props:{post:{},reverse:{type:Boolean}},setup(c){const n=c,r=R(),o=C(),d=g(()=>o.value.includes("slice")),l=g(()=>{var s;return(s=n.post.image)==null?void 0:s.toString()}),u=g(()=>j(n.post.excerpt));function p(){n.post.path&&r.push(n.post.path)}function a(s=[]){r.push({path:`/categories/${z(s).join("/")}`})}return(s,_)=>{var m;return t(),i("li",{class:h(["HairyArticleImage mb-10 py-2 lt-sm:mb-5 lt-md:mb-6",[d.value&&"slice",s.reverse&&"reverse"]])},[e("article",null,[e("div",ye,[e("a",{class:h(["text-size-2xl lt-sm:max-w-200px font-bold truncate cursor-pointer lt-sm:text-size-lg",[s.reverse?"order-last":"order-first"]]),onClick:p},f(s.post.title),3),e("div",he,[e("span",null,f(b(E)(s.post.date).format("YYYY-MM-DD")),1),e("span",null,f(s.post.wordCount)+"字",1),e("span",ke,f(s.post.readingTime)+"分钟",1)])]),e("div",{class:h(["h-200px lt-sm:h-120px flex bg-light-2 dark:bg-transparent rounded-5",[s.reverse?"pl-4":"pr-4"]])},[e("div",{class:h(["flex-1 post-image-content",[s.reverse?"order-last":"order-first"]])},[e("img",{class:"post-image rounded-1 w-full h-full object-cover cursor-pointer",src:l.value,onClick:p},null,8,xe)],2),e("div",$e,[e("div",be,[e("div",Pe,f(u.value),1)]),e("div",we,[e("a",{class:h(["cursor-pointer truncate lt-sm:max-w-120px",[s.reverse&&"order-1"]])},[(m=s.post.categories)!=null&&m.length?(t(),i("span",{key:0,onClick:_[0]||(_[0]=T=>a(s.post.categories))},f(s.$t(b(z)(s.post.categories).at(-1)||"",{},{missingWarn:!1})),1)):v("v-if",!0)],2),e("div",Ce,[e("a",{class:"link flex gap-2 cursor-pointer","aria-label":"read more",onClick:p},[s.reverse?(t(),i("span",He,"←")):v("v-if",!0),ze,s.reverse?v("v-if",!0):(t(),i("span",Se,"→"))])])])])],2)])],2)}}}),Le=W(Te,[["__scopeId","data-v-34cfc6d0"]]),je={class:"divide-y divide-gray-200 dark:divide-gray-700"},Ie=$({__name:"HairyPostImageList",props:{type:{},posts:{}},setup(c){const n=c,r=C(),o=g(()=>r.value.includes("reverse")),d=S(),l=g(()=>n.posts||d.value);return(u,p)=>{const a=Le;return t(),i("ul",je,[(t(!0),i(x,null,w(l.value,(s,_)=>(t(),y(I,{key:_,name:"fade"},{default:k(()=>[P(a,{post:s,reverse:o.value&&_%2!==0},null,8,["post","reverse"])]),_:2},1024))),128))])}}}),Re={class:"border-b border-[var(--hy-c-divider)] flex-wrap items-center flex justify-between mb-4 gap-2"},Be=e("div",{class:"flex-shrink-0 w-100px"}," 最近更新： ",-1),Me={class:"flex-1 flex items-center justify-end gap-2 flex-wrap"},Ae=e("div",{class:"lt-md:hidden"}," | ",-1),De={class:"lt-md:hidden"},Ve={class:"tags flex-center gap-2"},Ne=e("div",{class:"i-material-symbols-bookmarks"},null,-1),Ee=e("div",{class:"lt-md:hidden"}," | ",-1),Ye={class:"lt-md:hidden flex items-center gap-2"},Oe=e("div",{class:"i-material-symbols-folder-open-rounded text-14px"},null,-1),We=$({__name:"HairyUpdatedPost",props:{type:{},posts:{}},setup(c){const n=c,r=R(),o=g(()=>{const l=[...n.posts].map(u=>({...u,date:u.date instanceof Date?u.date.valueOf():new Date(u.date||Date.now()).valueOf()}));return l.sort((u,p)=>p.date-u.date),l[0]});function d(l=[]){r.push({path:`/categories/${z(l).join("/")}`})}return(l,u)=>{var a;const p=F;return t(),i("div",Re,[Be,e("div",Me,[P(p,{class:"truncate lt-sm:max-w-220px",href:o.value.path},{default:k(()=>[H(f(o.value.title),1)]),_:1},8,["href"]),(a=o.value.tags)!=null&&a.length?(t(),i(x,{key:0},[Ae,e("div",De,[e("div",Ve,[Ne,(t(!0),i(x,null,w(o.value.tags,s=>(t(),y(b(L),{key:s,size:"small",class:"dark:bg-dark-50 cursor-pointer border-none!",onClick:_=>l.$router.push(`/tags/${s}`)},{default:k(()=>[H(f(l.$t(s,{},{missingWarn:!1})),1)]),_:2},1032,["onClick"]))),128))])])],64)):v("v-if",!0),o.value.categories?(t(),i(x,{key:1},[Ee,e("div",Ye,[Oe,P(b(L),{size:"small",class:"dark:bg-dark-50 cursor-pointer border-none!",onClick:u[0]||(u[0]=s=>d(o.value.categories))},{default:k(()=>[H(f(b(z)(o.value.categories).map(s=>l.$t(s,{},{missingWarn:!1})).join("/")),1)]),_:1})])],64)):v("v-if",!0)])])}}}),Fe=["onClick"],Ue=$({__name:"HairyPostToggleLayout",setup(c){const n=C(),r=[{layout:"image:slice:reverse",icon:"i-fluent-text-align-distributed-24-filled"},{layout:"image:slice",icon:"i-fluent-text-align-left-16-filled"},{layout:"image",icon:"i-fluent-text-align-justify-20-filled"},{layout:"markdown",icon:"i-fluent-markdown-20-filled"},{layout:"text",icon:"i-fluent-code-text-16-filled"}],o=U(),{headerRef:d}=q(o),{height:l}=G(d),u=J(typeof document<"u"?document:void 0),p=g(()=>u.y.value>l.value);return(a,s)=>(t(),i("div",{class:h(["inline-flex gap-2 sticky top-15 inset-0 rounded-2 transition-colors duration-200",[p.value&&"bg-white bg-opacity-85 dark:bg-black dark:bg-opacity-80 z-100"]])},[(t(),i(x,null,w(r,_=>e("div",{key:_.layout,class:h(["p-2 rounded-full cursor-pointer",[b(n)===_.layout&&"text-primary"]]),onClick:m=>n.value=_.layout},[e("div",{class:h(["text-size-xl",_.icon])},null,2)],10,Fe)),64))],2))}}),qe={class:"mt-8"},Ke=$({__name:"HairyPosts",props:{type:{},posts:{},curPage:{default:1},pagination:{type:Boolean,default:!1},updated:{type:Boolean}},setup(c){const n=c,r=C(),o=K(7),d=S({type:n.type||""}),l=g(()=>n.posts||d.value),u=g(()=>l.value.slice((n.curPage-1)*o.value,n.curPage*o.value)),p=g(()=>n.pagination?u.value:l.value);return(a,s)=>{const _=Ue,m=We,T=Ie,B=fe,M=se;return t(),i("div",qe,[P(_),a.updated?(t(),y(m,{key:0,posts:l.value},null,8,["posts"])):v("v-if",!0),b(r).includes("image")?(t(),y(T,{key:1,posts:p.value},null,8,["posts"])):(t(),y(B,{key:2,posts:p.value},null,8,["posts"])),a.pagination?(t(),y(M,{key:3,class:"mb-6","cur-page":a.curPage,"page-size":o.value,total:l.value.length},null,8,["cur-page","page-size","total"])):v("v-if",!0)])}}});export{Ke as _};
